/*! Picturefill - v2.1.0 - 2014-09-16
* http://scottjehl.github.io/picturefill
* Copyright (c) 2014 https://github.com/scottjehl/picturefill/blob/master/Authors.txt; Licensed MIT */
window.matchMedia||(window.matchMedia=function(){"use strict";var a=window.styleMedia||window.media;if(!a){var b=document.createElement("style"),c=document.getElementsByTagName("script")[0],d=null;b.type="text/css",b.id="matchmediajs-test",c.parentNode.insertBefore(b,c),d="getComputedStyle"in window&&window.getComputedStyle(b,null)||b.currentStyle,a={matchMedium:function(a){var c="@media "+a+"{ #matchmediajs-test { width: 1px; } }";return b.styleSheet?b.styleSheet.cssText=c:b.textContent=c,"1px"===d.width}}}return function(b){return{matches:a.matchMedium(b||"all"),media:b||"all"}}}()),function(a,b){"use strict";function c(a,b){var c,d,e,g,h=f.qsa(a,"source[srcset]");for(c=0,d=h.length;d>c;c++)e=h[c],g=e.getAttribute("srcset"),g&&b.push({srcset:g,media:e.getAttribute("media"),type:e.getAttribute("type"),sizes:e.getAttribute("sizes")})}if(!("querySelectorAll"in b))throw"No support for this old browser.";b.createElement("picture");var d,e,f={},g=function(){},h=b.createElement("img"),i=b.documentElement;f.ns="picturefill"+(new Date).getTime(),f.onReady=function(){f.isReady=!0},f.isReady=!1,f.srcsetSupported="srcset"in h,f.sizesSupported="sizes"in h,f.currentSrcSupported="currentSrc"in h,f.hasConsole=a.console&&"function"==typeof console.warn,f.picutreFillAttribute="data-"+f.ns+"srcset",f.shortSelector="picture > img, img[srcset]",f.selector=f.shortSelector,f.srcsetSupported&&(f.selector+=", img["+f.picutreFillAttribute+"]"),f.qsa=function(a,b){return a.querySelectorAll(b)},f.qs=function(a,b){return a.querySelector(b)},f.makeUrl=function(){var a=b.createElement("a");return function(b){return a.href=b,a.href}}(),f.trim=function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},f.restrictsMixedContent="https:"===a.location.protocol,f.matchesMedia=function(b){return!b||a.matchMedia&&a.matchMedia(b).matches},f.vW=0,f.updateView=function(){var a="clientWidth",c="CSS1Compat"===b.compatMode;return function(){f.vW=c&&i[a]||b.body[a]||i[a]}}();var j={minw:/\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,maxw:/\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/},k={};f.mMQ=function(a){var b,c,d=!1;return a?(k[a]||(b=a.match(j.minw)&&parseFloat(RegExp.$1)+(RegExp.$2||""),c=a.match(j.maxw)&&parseFloat(RegExp.$1)+(RegExp.$2||""),b&&(b=parseFloat(b,10)*(b.indexOf("em")>0?f.getEmValue():1)),c&&(c=parseFloat(c,10)*(c.indexOf("em")>0?f.getEmValue():1)),k[a]={min:b,max:c}),b=k[a].min,c=k[a].max,(b&&f.vW>=b||c&&f.vW<=c)&&(d=!0),d):!0},f.matchesMedia("only all")||(f.matchesMedia=f.mMQ),f.DPR=a.devicePixelRatio||1,f.widthCache={};var l=/^([\d\.]+)(em|vw)$/;f.getWidthFromLength=function(a){var c,g,h=a;if(!f.widthCache[h])if(a=a||"100vw",g=a.match(l),g&&(g[1]=parseFloat(g[1],10)))f.widthCache[h]="vw"==g[2]?f.vW*g[1]/100:f.getEmValue()*g[1];else{a=a.replace("vw","%"),e||(e=b.createElement("div"),e.style.cssText="position: absolute; left: 0; visibility: hidden; display: block; padding: 0; margin: 0; border: none;"),d||(d=!0,i.insertBefore(e,i.firstChild));try{e.style.width=a}catch(j){c=!0}c&&e.offsetWidth<=0&&(e.style.width="100%"),f.widthCache[h]=e.offsetWidth}return f.widthCache[h]},f.types={},f.types["image/jpeg"]=!0,f.types["image/gif"]=!0,f.types["image/png"]=!0,f.types["image/svg+xml"]=b.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),f.createImageTest=function(a,c){var d,e=b.createElement("img"),g=function(){clearTimeout(d),f.isReady&&f.fillImgs(),e=null};f.types[a]="pending",e.onerror=function(){f.types[a]=!1,g()},e.onload=function(){f.types[a]=1===e.width,g()},d=setTimeout(e.onerror,300),e.src=c},f.verifyTypeSupport=function(a){return a?f.types[a]:!0},f.parseSize=function(){var a=/(\([^)]+\))?\s*(.+)/,b={};return function(c){var d;return b[c]||(d=(c||"").match(a),b[c]={media:d&&d[1],length:d&&d[2]}),b[c]}}(),f.parseSrcset=function(a){if(a.parsedSrcset)return a.parsedSrcset;var b,c,d,e,g,h=a.srcset;for(a.parsedSrcset=[];h;)h=h.replace(/^\s+/g,""),b=h.search(/\s/g),d=null,-1!==b?(c=h.slice(0,b),e=c.charAt(c.length-1),(","===e||""===c)&&(c=c.replace(/,+$/,""),d=""),h=h.slice(b+1),null===d&&(g=h.indexOf(","),-1!==g?(d=h.slice(0,g),h=h.slice(g+1)):(d=h,h=""))):(c=h,h=""),(c||d)&&a.parsedSrcset.push({url:c,descriptor:f.parseDescriptor(d,a.sizes)});return a.parsedSrcset};var m={},n=/^([\d\.]+)(w|x)$/;f.parseDescriptor=function(a){if(!m[a]){var b=f.trim(a||""),c={value:1,type:"x"};b&&(b.match(n)?(c.value=parseFloat(RegExp.$1,10),c.type=RegExp.$2):c.skip=!0),m[a]=c}return m[a]};var o;f.getEmValue=function(){if(!o&&b.body){var a=b.createElement("div"),c=b.body,d=i.style.fontSize,e=c&&c.style.fontSize;a.style.cssText="position:absolute;font-size:1em;width:1em",i.style.fontSize="100%",c.style.fontSize="100%";try{c.appendChild(a),o=a.offsetWidth,c.removeChild(a),o=parseFloat(o,10)}catch(f){}i.style.fontSize=d,e&&(c.style.fontSize=e)}return o||16},f.findWidthFromSourceSize=function(a){var b,c,d,e,g,h,i,j=f.trim(a).split(/\s*,\s*/);for(h=0,i=j.length;i>h;h++)if(c=j[h],d=f.parseSize(c),e=d.length,g=d.media,e&&f.matchesMedia(g)){b=e;break}return f.getWidthFromLength(b)},f.getResolution=function(a,b){var c=a.descriptor,d=b||"100vw",e=c.value,g={url:a.url,type:c.type,resolution:c.value||1};return"w"==c.type&&(g.computedWidth=f.findWidthFromSourceSize(d),g.resolution=e/g.computedWidth),g},f.getCandidatesFromSourceSet=function(a){var b,c,d=[];if(a){b=f.parseSrcset(a);for(var e=0,g=b.length;g>e;e++)c=b[e],c.descriptor&&c.descriptor.skip||d.push(f.getResolution(c,a.sizes))}return d},f.applyBestCandidateFromSrcSet=function(a,b){var c,d,e,g,h;a.sort(f.ascendingSort),d=a.length,e=a[d-1];for(var i=0;d>i;i++)if(c=a[i],c.resolution>=f.DPR){e=c;break}!e&&b[f.ns].src&&(e={url:b[f.ns].src}),g=b[f.ns].curSrc||b.currentSrc||b.src,e&&((h=f.makeUrl(e.url))!=g?f.restrictsMixedContent&&!e.url.indexOf("http:")?f.hasConsole&&console.warn("Blocked mixed content image "+h):f.loadImg(b,h,e):"w"==e.type&&f.addDimensions(b,null,e))};var p="naturalHeight"in h?"naturalHeight":"height";f.loadImg=function(a,b,c){var d,e,g,h,i=a[f.ns].loadGC;i&&i(),f.currentSrcSupported||(a.currentSrc=b),a[f.ns].curSrc=b,d=document.createElement("img"),a[f.ns].loadGC=function(){clearInterval(e),a[f.ns].loadGC=null,a=null,d=null},d.onload=function(){var e;a&&(f.observer&&f.observer.connected&&(e=!0,f.observer.disconnect()),a.src=b,f.addDimensions(a,d,c),a[f.ns].loadGC(),e&&f.observer.observe())},d.onload.onerror=a[f.ns].loadGC,d.onload.onabort=a[f.ns].loadGC,d.onload.onerror=a[f.ns].loadGC,e=setInterval(function(){(!d||d.complete||d.error)&&clearInterval(e),(h=d[p])&&h!=g&&d.width&&(g=h,f.addDimensions(a,d,c))},9),d.src=b,!a||a.complete&&a.getAttribute("src")||(a.src=b),d&&d.complete&&d.onload()},f.addDimensions=function(a,b,c){a[f.ns].dims||(b&&(a[f.ns].nW=b.naturalWidth||b.width,a[f.ns].nH=b.naturalHeight||b.height),"x"==c.type&&b?(a.setAttribute("width",parseInt(a[f.ns].nW/c.resolution,10)),a.setAttribute("height",parseInt(a[f.ns].nH/c.resolution,10))):"w"==c.type?(a.setAttribute("width",parseInt(c.computedWidth,10)),a.setAttribute("height",parseInt(a[f.ns].nH*(c.computedWidth/a[f.ns].nW),10))):(a.removeAttribute("width"),a.removeAttribute("height")))},f.applyBestCandidate=function(a){var b,c=f.getFirstMatch(a);"pending"!=c&&(b=f.getCandidatesFromSourceSet(c),f.applyBestCandidateFromSrcSet(b,a),a[f.ns].evaluated=!0)},f.ascendingSort=function(a,b){return a.resolution-b.resolution},f.removeMediaShim=function(a){var b,c=f.qs(a,"video, audio");if(c){for(b=c.getElementsByTagName("source");b.length;)a.insertBefore(b[0],c);c.parentNode.removeChild(c)}},f.getFirstMatch=function(a){var b,c,d,e=!1,g=a[f.ns].candidates;for(b=0;b<g.length&&!e;b++)if(c=g[b],c.srcset&&f.matchesMedia(c.media)&&(d=f.verifyTypeSupport(c.type))){"pending"==d&&(c=d),e=c;break}return e},f.hasNonXDescriptor=function(a){var b,c=f.parseSrcset(a),d=!1;for(b=0;b<c.length;b++)if(c[0].descriptor&&"x"!=c[0].descriptor.type){d=!0;break}return d},f.needsSrcsetPolyfill=function(a){if(!a)return!1;var b=!f.srcsetSupported;return b||f.sizesSupported||!a.sizes&&!f.hasNonXDescriptor(a)||(b=!0),b},f.parseCanditates=function(a,b,d){var e,g,h,i="PICTURE"===b.nodeName.toUpperCase();"src"in a[f.ns]&&!d.reparseSrc||(a[f.ns].src=a.getAttribute("src")),"dims"in a[f.ns]&&!d.reparseDimensions||(a[f.ns].dims=a.getAttribute("width")&&a.getAttribute("height")),"srcset"in a[f.ns]&&!d.reparseSrcset||(e=a.getAttribute("srcset"),h=!e&&a[f.ns].srcset,a[f.ns].srcset=e,f.srcsetSupported&&(e?(a.setAttribute(f.picutreFillAttribute,e),f.srcsetSupported&&!f.sizesSupported?a.srcset="":a.removeAttribute("srcset")):a.removeAttribute(f.picutreFillAttribute))),a[f.ns].srcset&&(g={srcset:a[f.ns].srcset,sizes:a.getAttribute("sizes")},i||f.parseSrcset(g)),a[f.ns].supported=i||h||f.needsSrcsetPolyfill(g)?!1:!0,a[f.ns].candidates=[],i&&(f.removeMediaShim(b),c(b,a[f.ns].candidates)),g&&a[f.ns].candidates.push(g),a[f.ns].parsed=!0},f.fillImg=function(a,b){a[f.ns]||(a[f.ns]={}),(b.reevaluate||b.reparse||!a[f.ns].evaluated)&&((!a[f.ns].parsed||b.reparse)&&f.parseCanditates(a,a.parentNode,b),a[f.ns].supported?a[f.ns].evaluated=!0:(a[f.ns].evaluated=!1,f.applyBestCandidate(a)))},f.setupRun=function(a){(!a||a.reevaluate||a.reparse)&&(f.widthCache={})},f.teardownRun=function(){var a;d&&(d=!1,a=e.parentNode,a&&a.removeChild(e))};var q=function(a){var c,d,e,g,h=a||{};if((h.reparseSrcset||h.reparseSrc||h.reparseDimensions)&&(g=!0,h.reparse=!0),g&&!h.elements)throw"reparse should only run on specific elements.";if(c=h.elements||f.qsa(b,h.reevaluate||h.reparse?f.selector:f.shortSelector),e=c.length){for(f.setupRun(h),d=0;e>d;d++)f.fillImg(c[d],h);f.teardownRun(h)}};a.HTMLPictureElement&&(q=g,f.fillImg=g),q._=f,f.fillImgs=q,a.HTMLPictureElement||(!function(){var c,d=function(){b.body&&(/^loade|^c|^i/.test(b.readyState||"")?(clearInterval(e),f.fillImgs(),f.onReady(),f.onReady=g):f.fillImgs())},e=setInterval(d,250),h=function(){f.updateView(),f.fillImgs({reevaluate:!0})},i=function(){a.clearTimeout(c),c=a.setTimeout(h,99)};a.addEventListener?a.addEventListener("resize",i,!1):a.attachEvent&&a.attachEvent("onresize",i)}(),f.updateView(),f.createImageTest("image/webp","data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=")),"object"==typeof module&&"object"==typeof module.exports?module.exports=q:"function"==typeof define&&define.amd?(a.picturefill=q,define(function(){return q})):"object"==typeof a&&(a.picturefill=q)}(this,this.document);